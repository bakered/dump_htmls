<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple Highcharts Map</title>

    <!-- Highcharts Map Dependencies -->
    <script src="https://code.highcharts.com/maps/highmaps.js"></script>
    <script src="https://code.highcharts.com/maps/modules/exporting.js"></script>
    <script src="https://code.highcharts.com/modules/offline-exporting.js"></script>
    <script src="https://code.highcharts.com/modules/export-data.js"></script>
    <script src="https://code.highcharts.com/maps/modules/pattern-fill.js"></script>
    <script src="https://code.highcharts.com/maps/modules/accessibility.js"></script>

    <!-- Custom CSS -->
    <link rel="stylesheet" href="../static/css/styles.css">

    <!-- Inter font -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;600&display=swap" rel="stylesheet">

    <script>
        var user_id = "data"; // Inject user ID (used in .js)
    </script>


</head>
<body>

    <div class="right-content">
    <!-- Controls -->
    <div id="controls" class="slider-wrapper">
        <div class="slider-stack">
            <div class="slider-title">Evolution of US tariffs</div>
            <div class="slider-labels">
                <span><strong>Pre</strong> <br>January 2025</span>
                <span><strong>During</strong> <br>90-day pause</span>
                <span><strong>After</strong> <br>90-day pause</span>
            </div>
            <input type="range" id="tariff_structureSlider" min="1" max="3" step="1">
        </div>
    </div>

    <!-- Map Container -->
    <div id="container"></div>

    <div style="font-size: 8.5px; margin-top: -20px; color: #555; padding-right: 25Px; padding-left: 50px;">
        <p><em>Source:</em> UNCTAD Secretariat, based on UN Comtrade, UNCTAD TRAINS and Presidential actions, including the Executive Orders published by the White House.
            <br><em>Note:</em> Trade weights for the year 2023. 
            <em>Map disclaimer:</em> https://unctad.org/map-disclaimer</p>
    </div>

      <div style="height: 4px; background-color: #009EDB; margin: 0;"></div>


</div>

    <!-- Load the simple JS logic -->
    <script type="module" src="../static/simple.js"></script>

    <script>
        const slider = document.getElementById('tariff_structureSlider');
        
        function updateSliderBackground() {
          const min = +slider.min;
          const max = +slider.max;
          const val = +slider.value;
        
          const percent = ((val - min) / (max - min)) * 100;
        
          slider.style.background = `linear-gradient(to right, #009EDB 0%, #009EDB ${percent}%, #ffffff ${percent}%, #ffffff 100%)`;
        }
        
        // Initialize and update on input
        slider.addEventListener('input', updateSliderBackground);
        updateSliderBackground();
        </script>

    <script>
        async function injectLLMData() {
        try {
            const res = await fetch('../static/data/mapData.json'); // absolute path
            if (!res.ok) {
            console.error('Failed to load mapData.json:', res.status);
            return;
            }

            const mapData = await res.json();

            // Inject for LLMs
            const script = document.createElement('script');
            script.type = 'application/json';
            script.id = 'llm-map-data';
            script.textContent = JSON.stringify(mapData);
            document.head.appendChild(script);

        } catch (err) {
            console.error('Error loading LLM data:', err);
        }
        }

        document.addEventListener('DOMContentLoaded', injectLLMData);
    </script>

</body>
</html>
